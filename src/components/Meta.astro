---
import { SITE } from "$lib/config";
import { getImage } from "@astrojs/image";
import { base_description } from "$lib/constants";
import favicon from "../assets/images/favicon.ico";

const { src: defaultImage } = getImage !== undefined ? { src: "/favicon.ico" } : await getImage({
  // TODO: Add proper default image
  src: favicon,
  width: 1200,
  height: 628,
});

const default_title = "CoderDōjō R & B";

let { title } = Astro.props;
const {
  description = base_description,
  image = defaultImage,
  canonical,
} = Astro.props;

if (title) {
  title = `${default_title} - ${title}`;
} else {
  title = default_title;
}

const absoluteImageUrl = new URL(image, Astro.site);
---

<title>{title}</title>
<meta property="og:title" content={title} />
<meta charset="utf-8" />

<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=5"
/>
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<meta property="og:site_name" content="CoderDōjō" />
<meta property="og:type" content="text/html" />

<meta name="description" content={description} />
<meta property="og:description" content={description} />
<meta name="lang" content="de" />
<meta property="og:locale" content="de" />

<meta name="apple-mobile-web-app-title" content="CoderDōjō" />
<meta name="application-name" content="CoderDōjō" />
<meta name="msapplication-TileColor" content="#314958" />
<meta
  name="msapplication-TileImage"
  content="/assets/images/logo/mstile-144x144.png"
/>
<meta
  name="msapplication-config"
  content="/assets/images/logo/browserconfig.xml"
/>
<meta name="theme-color" content="#314958" />

<!-- theme/assets/images/favicon -->
<link
  rel="apple-touch-icon"
  sizes="180x180"
  href="/assets/images/logo/apple-touch-icon.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="/assets/images/logo/favicon-32x32.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="192x192"
  href="/assets/images/logo/android-chrome-192x192.png"
/>
<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="/assets/images/logo/favicon-16x16.png"
/>
<link rel="manifest" href="/assets/images/logo/site.webmanifest" />
<link
  rel="mask-icon"
  href="/assets/images/logo/safari-pinned-tab.svg"
  color="#5bbad5"
/>
<link rel="shortcut icon" href="/assets/images/favicon.ico" />
<meta name="apple-mobile-web-app-title" content="CoderDōjō Red and Blue" />
<meta name="application-name" content="CoderDōjō Red and Blue" />
<meta name="msapplication-TileColor" content="#d8dee9" />
<meta
  name="msapplication-TileImage"
  content="/assets/images/logo/mstile-144x144.png"
/>
<meta
  name="msapplication-config"
  content="/assets/images/logo/browserconfig.xml"
/>
<meta name="theme-color" content="#d8dee9" />
<meta
  property="og:image"
  content="/assets/images/logo/android-chrome-192x192.png"
/>

<!-- Twitter Meta Tags -->
{canonical && <meta name="twitter:url" content={canonical} />}
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={absoluteImageUrl} />
